"use client";

import { Button, Grid, TextField, Typography } from '@mui/material';
import React, { useState } from 'react';

const AddPostForm: React.FC = () => {
    const [title, setTitle] = useState('');
    const [comment, setComment] = useState('');

    async function handleAddPost(e: React.FormEvent) {
        e.preventDefault();

        const res = await fetch(`http://localhost:3000/api/posts`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ title, comment }),
        });

        if (res.ok) {
            setTitle('');
            setComment('');
            window.location.reload();
        }
    }

    return (
        <form onSubmit={handleAddPost}>
            <Grid container justifyContent="center" gap={3} paddingLeft={50} paddingRight={50} paddingBottom={10}>
                <Typography variant="h4" sx={{ textAlign: 'center', marginTop: 10 }}>Ajouter un post</Typography>

                <TextField
                    label="Titre"
                    variant="filled"
                    fullWidth
                    value={title}
                    onChange={(e) => setTitle(e.target.value)}
                />
                <TextField
                    label="Commentaire"
                    multiline
                    variant="filled"
                    fullWidth
                    value={comment}
                    onChange={(e) => setComment(e.target.value)}
                />
                <Button type="submit" variant="outlined" color='primary'>
                    Ajouter
                </Button>
            </Grid>
        </form>
    )
}

export default AddPostForm;